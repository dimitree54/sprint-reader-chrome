# Story 1.20: Final Review, Cleanup, and Documentation Refresh

## Status
Draft

## Story
**As a** maintainer preparing the Sprint Reader refactor for hand-off,
**I want** to remove temporary scaffolding, reconcile documentation, and confirm the full verification suite passes,
**so that** the extension ships with a clean codebase and an authoritative record of the new architecture.

## Acceptance Criteria
1. No temporary flags, duplicate pathways, or legacy reader code remains after the service migration.
2. `README.md`, `docs/architecture.md`, and `docs/refactoring/new_architecture.md` accurately describe the final structure.
3. All verification commands succeed: `npm run lint`, `npm run typecheck`, and `npm test`.
4. Manual smoke confirms RSVP playback, popup controls, and settings persistence across Chrome-equivalent builds.
5. Change log entries and story statuses are updated to reflect completion.
6. Unit test coverage exists for all newly written/refactored modules introduced during this refactor (core services, store, renderer, controls, playback); untouched legacy modules are not required to gain new tests.

## Tasks / Subtasks
- [ ] Audit repository for leftover legacy modules or feature flags (AC: 1)
  - [ ] Search for references to removed reader globals
  - [ ] Remove obsolete TODO/FIXME markers introduced during refactor
  - [ ] Delete temporary adapters and dead exports
- [ ] Refresh documentation (AC: 2)
  - [ ] Update `README.md` with new architecture summary and commands
  - [ ] Align `docs/architecture.md` with implemented structure
  - [ ] Confirm `docs/refactoring/new_architecture.md` matches final implementation details
- [ ] Update change logs and story statuses (AC: 5)
  - [ ] Record final version entries in relevant docs
  - [ ] Transition completed stories from Draft to Done
- [ ] Run full verification suite (AC: 3)
  - [ ] Execute `npm run lint`
  - [ ] Execute `npm run typecheck`
  - [ ] Execute `npm test`
- [ ] Perform manual smoke tests (AC: 4)
  - [ ] Validate RSVP playback with and without streaming enabled
  - [ ] Confirm popup quick actions interact with reader correctly
  - [ ] Confirm settings persistence and OpenAI key handling

## Dev Notes

### Architecture Context
This story finalises Phase 6, Step 6.2 of the refactoring plan by ensuring the repository, documentation, and verification suite reflect the completed service-oriented architecture.

[Source: docs/refactoring/refactoring_plan.md#phase-6-cleanup-and-finalization]

### Quality Expectations
- No regression in extension functionality is acceptable. If issues arise, halt release and fix root causes.
- Documentation updates must land in the same phase to keep the knowledge base trustworthy.
- Maintain the requirement that every phase ends with a working build and passing automation.

### Testing Standards
- Automation: `npm run lint`, `npm run typecheck`, `npm test`
- Manual: RSVP playback, popup controls, settings flows across supported browsers
 - Confirm unit tests exist for all newly introduced/refactored modules and are green; do not add tests for untouched legacy modules

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-09-26 | 1.0 | Initial story creation | Scrum Master |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

## QA Results
*This section will be populated by the QA agent after implementation review*

### Linting Strategy
- When introducing new lint or type checks, add existing files to the ignore list so the baseline continues to pass.
- Whenever you modify one of the ignored files, remove it from the ignore list and resolve any violations so that the updated code complies with the stricter rules.
- Remove this story's touched files from the `.eslintignore` baseline created in Story 1.1 before committing.
